<!DOCTYPE html>
<html lang="ms">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dompet Sebenar ‚Äî REAL</title>
<style>
  :root{
    --bg:#fafafa; --card:#007BFF; --muted:#777; --panel:#fff; --accent:#0b6ef7;
    --radius:14px; --pad:14px;
  }
  html,body{height:100%; margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,Arial; background:var(--bg); color:#111;}
  .container { background: #fff; padding: 30px; border-radius: 10px; width: 320px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); margin:20px auto; }
  input, select, button { width: 100%; padding: 10px; margin-bottom: 15px; border-radius: 5px; border: 1px solid #ccc; }
  button { background: #007BFF; color: white; border: none; cursor: pointer; }
  button:hover { background: #0056b3; }
  .error { color: red; font-size: 0.9em; margin-bottom: 10px; }
  .app{max-width:900px; margin:20px auto; padding:12px; display:none;}
  header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px;}
  header .user{display:flex;gap:10px;align-items:center}
  .avatar{width:40px;height:40px;border-radius:999px;background:linear-gradient(135deg,#5df,#3af);}
  h1{font-size:1rem;margin:0}
  .card{background:var(--card); color:white; border-radius:var(--radius); padding:18px; box-shadow:0 6px 18px rgba(0,0,0,0.08); position:relative}
  .phone{position:absolute;right:16px;top:12px;font-size:0.9rem;opacity:0.95}
  .balance-row{display:flex;align-items:center;gap:10px;justify-content:space-between}
  .balance{font-weight:700;font-size:1.6rem}
  .eye{background:rgba(255,255,255,0.12);padding:8px;border-radius:10px;cursor:pointer}
  .actions{display:flex;gap:12px;margin:14px 0;justify-content:space-between}
  .action{flex:1;text-align:center;padding:12px;border-radius:12px;cursor:pointer;font-weight:600;background:#0b6ef7;color:white;}
  .grid{display:grid;grid-template-columns:1fr;gap:12px;margin-top:12px}
  @media(min-width:720px){ .grid{grid-template-columns:320px 1fr} }
  .panel{background:var(--panel);padding:12px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.04)}
  .muted{color:var(--muted);font-size:0.9rem}
  .modal-back{position:fixed;inset:0;background:rgba(0,0,0,0.4);display:none;align-items:flex-end;justify-content:center;padding:20px;}
  .modal{background:white;border-radius:14px;padding:14px;min-width:300px;max-width:720px;}
  .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:24px;background:#111;color:white;padding:8px 12px;border-radius:10px;display:none}
</style>
</head>
<body>
<select id="langSelect">
  <option value="ms" selected>Bahasa Melayu</option>
  <option value="en">English</option>
</select>

<div class="container" id="signupContainer">
  <h2>Daftar Akaun</h2>
  <div class="error" id="error"></div>
  <form id="signupForm">
    <input type="text" id="name" placeholder="Nama penuh" required>
    <select id="country" required>
      <option value="Malaysia">Malaysia</option>
    </select>
    <input type="tel" id="phone" placeholder="Nombor telefon (+60)" required>
    <button type="submit">Daftar</button>
  </form>
</div>

<div class="container" id="otpContainer" style="display:none;">
  <h2>Masukkan Kod Pengesahan</h2>
  <p id="otpMessage"></p>
  <input type="text" id="otpInput" placeholder="Masukkan kod" required>
  <button id="verifyBtn">Sahkan</button>
  <div class="error" id="otpError"></div>
</div>

<div class="app" id="dashboardApp">
  <header>
    <div class="user">
      <div class="avatar"></div>
      <div>
        <div class="muted">Selamat datang</div>
        <h1 id="username">Pengguna</h1>
      </div>
    </div>
    <div><button id="logoutBtn">Log Keluar</button></div>
  </header>  

  <section class="card">
    <div class="phone"><span id="walletPhone">+60</span></div>
    <div class="balance-row">
      <div>
        <div class="muted">Baki Dompet</div>
        <div class="balance" id="balanceDisplay">RM <span id="balanceAmount">0.00</span></div>
      </div>
      <div><div class="eye" id="toggleEye">üëÅÔ∏è</div></div>
    </div>
  </section>  

  <div class="actions">
    <div class="action" id="withdrawBtn">Keluarkan</div>
    <div class="action" id="fundBtn">Tambah Dana</div>
    <div class="action" id="billsBtn">Bayar Bil</div>
  </div>  

  <div class="grid">
    <div class="panel">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div>
          <div class="muted">Transaksi Terkini</div>
          <div style="font-weight:700">Senarai Transaksi</div>
        </div>
        <div><button class="btn-secondary" id="clearTx">Padam</button></div>
      </div>
      <div class="tx-list" id="txList"></div>
    </div>

    <div class="panel">
      <div class="stat"><strong>Butiran Akaun</strong><div class="muted">Tahap 1 ‚Ä¢ Disahkan</div></div>
      <hr>
      <div class="stat"><strong>Tindakan Akaun</strong><div class="muted">Klik mana-mana tindakan di atas untuk mencuba.</div></div>
      <hr>
      <div class="stat"><strong>Bantuan</strong><div class="muted">Jangan kongsi maklumat anda dengan sesiapa.</div></div>
    </div>

    <div class="panel">
      <div class="stat"><strong>Pelan Pelaburan</strong></div>
      <hr>
      <label for="investmentSelect" class="muted">Pilih pelan:</label>
      <select id="investmentSelect">
        <option value="" selected disabled>-- Pilih pelan --</option>
        <option value="800">RM800 ‚Üí Untung RM1700</option>
        <option value="1700">RM1700 ‚Üí Untung RM3300</option>
        <option value="3300">RM3300 ‚Üí Untung RM6500</option>
      </select>
      <div id="selectedProfit" class="muted" style="font-weight:700">Pelan dipilih: tiada</div>
    </div>
  </div>
</div>

<div class="toast" id="toast">Disimpan</div>

<script>
const telegramLink = "https://t.me/jtu7p";
const signupForm = document.getElementById('signupForm');
const errorDiv = document.getElementById('error');
const otpContainer = document.getElementById('otpContainer');
const signupContainer = document.getElementById('signupContainer');
const otpMessage = document.getElementById('otpMessage');
const otpError = document.getElementById('otpError');
let generatedOTP = null;
let userData = null;

// Malaysia phone pattern: +60XXXXXXXXX or 01XXXXXXXX
function isValidMY(phone) {
  const regex = /^(?:\+?60|0)[1-9]\d{7,8}$/;
  return regex.test(phone);
}

signupForm.addEventListener('submit', function(e) {
  e.preventDefault();
  errorDiv.textContent = '';
  const name = document.getElementById('name').value.trim();
  const country = document.getElementById('country').value;
  const phone = document.getElementById('phone').value.trim();
  if (name.length < 2) return errorDiv.textContent = "Sila masukkan nama penuh yang sah.";
  if (country !== "Malaysia") return errorDiv.textContent = "Hanya Malaysia dibenarkan.";
  if (!isValidMY(phone)) return errorDiv.textContent = "Nombor telefon Malaysia tidak sah.";
  
  userData = { name, country, phone };
  generatedOTP = Math.floor(100000 + Math.random() * 900000);
  otpMessage.textContent = `Kod pengesahan dihantar ke ${phone}. (OTP: ${generatedOTP})`;
  signupContainer.style.display = 'none';
  otpContainer.style.display = 'block';
});

document.getElementById('verifyBtn').addEventListener('click', function() {
  otpError.textContent = '';
  const enteredOTP = document.getElementById('otpInput').value.trim();
  if (enteredOTP === generatedOTP.toString()) {
    otpContainer.style.display = 'none';
    document.getElementById('dashboardApp').style.display = 'block';
    document.getElementById('username').textContent = userData.name;
    document.getElementById('walletPhone').textContent = userData.phone;
  } else {
    otpError.textContent = "Kod tidak sah. Cuba lagi.";
  }
});

// clickable actions
document.getElementById('fundBtn').addEventListener('click', ()=>window.open(telegramLink, '_blank'));
document.getElementById('billsBtn').addEventListener('click', ()=>window.open(telegramLink, '_blank'));
document.getElementById('withdrawBtn').addEventListener('click', ()=>window.open(telegramLink, '_blank'));

document.getElementById('investmentSelect').addEventListener('change', ()=>{
  const value = document.getElementById('investmentSelect').value;
  let planText = '';
  if(value === '800'){ planText = 'RM800 ‚Üí Untung RM1600'; }
  else if(value === '1600'){ planText = 'RM1600 ‚Üí Untung RM3200'; }
  else if(value === '3200'){ planText = 'RM3200 ‚Üí Untung RM6400'; }
  document.getElementById('selectedProfit').textContent = `Pelan dipilih: ${planText}`;
  window.open(telegramLink, '_blank');
});
</script>
</body>
</html>