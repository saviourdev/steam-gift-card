<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Admin Panel - Update Balance</title>
<style>
  body { font-family: Arial, sans-serif; background:#0b0c10; color:white; display:flex; justify-content:center; align-items:center; height:100vh; }
  .card { background:#111318; padding:20px; border-radius:12px; box-shadow:0 0 10px rgba(0,0,0,.5); width:300px; }
  h1 { font-size:20px; margin-bottom:20px; text-align:center; }
  label { display:block; margin-bottom:8px; }
  input { width:100%; padding:10px; margin-bottom:12px; border-radius:8px; border:1px solid #333; background:#0b0d12; color:white; }
  button { width:100%; padding:10px; border:none; border-radius:8px; background:#22c55e; color:#052e13; font-weight:bold; cursor:pointer; }
  button:hover { background:#16a34a; }
  #status { margin-top:12px; text-align:center; font-size:14px; }
</style>
</head>
<body>
  <div class="card">
    <h1>Admin Update Balance</h1>
    <label for="amount">Enter new balance (PLN)</label>
    <input type="number" id="amount" placeholder="1000" />
    <button id="updateBtn">Update Balance</button>
    <div id="status"></div>
  </div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

// --- Firebase config (same as your user page) ---
const firebaseConfig = {
  apiKey: "AIzaSyBwFCZBwoxkT3nYzqO1tS9l2FUum5ZFSK4",
  authDomain: "balance-app-b9b17.firebaseapp.com",
  projectId: "balance-app-b9b17",
  storageBucket: "balance-app-b9b17.appspot.com",
  messagingSenderId: "178578219321",
  appId: "1:178578219321:web:8342def76f387c9f02c8e8"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// --- Update button logic ---
document.getElementById("updateBtn").addEventListener("click", async () => {
  const amount = Number(document.getElementById("amount").value);
  const status = document.getElementById("status");

  if (isNaN(amount) || amount <= 0) {
    status.textContent = "⚠️ Please enter a valid amount";
    status.style.color = "red";
    return;
  }

  try {
    await setDoc(doc(db, "global", "balance"), { value: amount });
    status.textContent = "✅ Balance updated to " + amount + " PLN";
    status.style.color = "lime";
  } catch (err) {
    console.error(err);
    status.textContent = "❌ Error: " + err.message;
    status.style.color = "red";
  }
});
</script>
</body>
</html>